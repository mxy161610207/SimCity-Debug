<?xml version="1.0"?>

<rules>
    <rule>
        <id>rule_00</id>
        <explanation en="If a sensor detects a car passing by when this car's state is still, then this is a sensor error."
                     ch="如果一辆车处于静止状态，而传感器检测到了它的经过，表明传感器出错了。" />
        <formula>
            <forall var="v1" in="latest">
                <not>
                    <bfunc id="still_state">
                        <param pos="1" var="v1" field="state" />
                    </bfunc>
                </not>
            </forall>
        </formula>
    </rule>

    <rule>
        <id>rule_01</id>
        <explanation en="An orange car cannot be detected by different sensors at the same time." ch="一辆橘色小车不可能同时被不同的传感器检测到。" />
        <formula>
            <forall var="v1" in="orange_car1">
                <not>
                    <exists var="v2" in="orange_car2">
                        <and>
                            <not>
                                <bfunc id="same">
                                    <param pos="1" var="v1" field="id" />
                                    <param pos="2" var="v2" field="id" />
                                </bfunc>
                            </not>
                            <and>
                                <not>
                                    <bfunc id="same_location">
                                        <param pos="1" var="v1" field="cur_loc" />
                                        <param pos="2" var="v2" field="cur_loc" />
                                    </bfunc>
                                </not>
                                <bfunc id="short_time">
                                    <param pos="1" var="v1" field="timestamp" />
                                    <param pos="2" var="v2" field="timestamp" />
                                </bfunc>
                            </and>
                        </and>
                    </exists>
                </not>
            </forall>
        </formula>
    </rule>

    <rule>
        <id>rule_02</id>
        <explanation en="A green car cannot be detected by different sensors at the same time." ch="一辆绿色小车不可能同时被不同的传感器检测到。" />
        <formula>
            <forall var="v1" in="green_car1">
                <not>
                    <exists var="v2" in="green_car2">
                        <and>
                            <not>
                                <bfunc id="same">
                                    <param pos="1" var="v1" field="id" />
                                    <param pos="2" var="v2" field="id" />
                                </bfunc>
                            </not>
                            <and>
                                <not>
                                    <bfunc id="same_location">
                                        <param pos="1" var="v1" field="cur_loc" />
                                        <param pos="2" var="v2" field="cur_loc" />
                                    </bfunc>
                                </not>
                                <bfunc id="short_time">
                                    <param pos="1" var="v1" field="timestamp" />
                                    <param pos="2" var="v2" field="timestamp" />
                                </bfunc>
                            </and>
                        </and>
                    </exists>
                </not>
            </forall>
        </formula>
    </rule>

    <rule>
        <id>rule_03</id>
        <explanation en="A black car cannot be detected by different sensors at the same time." ch="一辆黑色小车不可能同时被不同的传感器检测到。" />
        <formula>
            <forall var="v1" in="black_car1">
                <not>
                    <exists var="v2" in="black_car2">
                        <and>
                            <not>
                                <bfunc id="same">
                                    <param pos="1" var="v1" field="id" />
                                    <param pos="2" var="v2" field="id" />
                                </bfunc>
                            </not>
                            <and>
                                <not>
                                    <bfunc id="same_location">
                                        <param pos="1" var="v1" field="cur_loc" />
                                        <param pos="2" var="v2" field="cur_loc" />
                                    </bfunc>
                                </not>
                                <bfunc id="short_time">
                                    <param pos="1" var="v1" field="timestamp" />
                                    <param pos="2" var="v2" field="timestamp" />
                                </bfunc>
                            </and>
                        </and>
                    </exists>
                </not>
            </forall>
        </formula>
    </rule>

    <rule>
        <id>rule_04</id>
        <explanation en="A white car cannot be detected by different sensors at the same time." ch="一辆白色小车不可能同时被不同的传感器检测到。" />
        <formula>
            <forall var="v1" in="white_car1">
                <not>
                    <exists var="v2" in="white_car2">
                        <and>
                            <not>
                                <bfunc id="same">
                                    <param pos="1" var="v1" field="id" />
                                    <param pos="2" var="v2" field="id" />
                                </bfunc>
                            </not>
                            <and>
                                <not>
                                    <bfunc id="same_location">
                                        <param pos="1" var="v1" field="cur_loc" />
                                        <param pos="2" var="v2" field="cur_loc" />
                                    </bfunc>
                                </not>
                                <bfunc id="short_time">
                                    <param pos="1" var="v1" field="timestamp" />
                                    <param pos="2" var="v2" field="timestamp" />
                                </bfunc>
                            </and>
                        </and>
                    </exists>
                </not>
            </forall>
        </formula>
    </rule>

    <rule>
        <id>rule_05</id>
        <explanation en="A red car cannot be detected by different sensors at the same time." ch="一辆红色小车不可能同时被不同的传感器检测到。" />
        <formula>
            <forall var="v1" in="red_car1">
                <not>
                    <exists var="v2" in="red_car2">
                        <and>
                            <not>
                                <bfunc id="same">
                                    <param pos="1" var="v1" field="id" />
                                    <param pos="2" var="v2" field="id" />
                                </bfunc>
                            </not>
                            <and>
                                <not>
                                    <bfunc id="same_location">
                                        <param pos="1" var="v1" field="cur_loc" />
                                        <param pos="2" var="v2" field="cur_loc" />
                                    </bfunc>
                                </not>
                                <bfunc id="short_time">
                                    <param pos="1" var="v1" field="timestamp" />
                                    <param pos="2" var="v2" field="timestamp" />
                                </bfunc>
                            </and>
                        </and>
                    </exists>
                </not>
            </forall>
        </formula>
    </rule>

    <rule>
        <id>rule_06</id>
        <explanation en="A silver SUV cannot be detected by different sensors at the same time." ch="一辆银色小车不可能同时被不同的传感器检测到。" />
        <formula>
            <forall var="v1" in="silver_suv1">
                <not>
                    <exists var="v2" in="silver_suv2">
                        <and>
                            <not>
                                <bfunc id="same">
                                    <param pos="1" var="v1" field="id" />
                                    <param pos="2" var="v2" field="id" />
                                </bfunc>
                            </not>
                            <and>
                                <not>
                                    <bfunc id="same_location">
                                        <param pos="1" var="v1" field="cur_loc" />
                                        <param pos="2" var="v2" field="cur_loc" />
                                    </bfunc>
                                </not>
                                <bfunc id="short_time">
                                    <param pos="1" var="v1" field="timestamp" />
                                    <param pos="2" var="v2" field="timestamp" />
                                </bfunc>
                            </and>
                        </and>
                    </exists>
                </not>
            </forall>
        </formula>
    </rule>

    <rule>
        <id>rule_07</id>
        <explanation en="An orange car must enter streets in topological order. For instance, the car cannot skip the current street and directly enter the next one."
                     ch="橘色小车必须按照拓扑顺序进入街道。例如，它不能跳过当前街道而直接进入下一个。" />
        <formula>
            <forall var="v1" in="orange_car3">
                <or>
                    <not>
                        <exists var="v2" in="orange_car4">
                            <bfunc id="earlier_than">
                                <param pos="1" var="v2" field="timestamp" />
                                <param pos="2" var="v1" field="timestamp" />
                            </bfunc>
                        </exists>
                    </not>
                    <exists var="v3" in="orange_car5">
                        <and>
                            <bfunc id="same_location">
                                <param pos="1" var="v1" field="prev_loc" />
                                <param pos="2" var="v3" field="cur_loc" />
                            </bfunc>
                            <bfunc id="same_location">
                                <param pos="1" var="v1" field="cur_loc" />
                                <param pos="2" var="v3" field="next_loc" />
                            </bfunc>
                        </and>
                    </exists>
                </or>
            </forall>
        </formula>
    </rule>

    <rule>
        <id>rule_08</id>
        <explanation en="A green car must enter streets in topological order. For instance, the car cannot skip the current street and directly enter the next one."
                     ch="绿色小车必须按照拓扑顺序进入街道。例如，它不能跳过当前街道而直接进入下一个。" />
        <formula>
            <forall var="v1" in="green_car3">
                <or>
                    <not>
                        <exists var="v2" in="green_car4">
                            <bfunc id="earlier_than">
                                <param pos="1" var="v2" field="timestamp" />
                                <param pos="2" var="v1" field="timestamp" />
                            </bfunc>
                        </exists>
                    </not>
                    <exists var="v3" in="green_car5">
                        <and>
                            <bfunc id="same_location">
                                <param pos="1" var="v1" field="prev_loc" />
                                <param pos="2" var="v3" field="cur_loc" />
                            </bfunc>
                            <bfunc id="same_location">
                                <param pos="1" var="v1" field="cur_loc" />
                                <param pos="2" var="v3" field="next_loc" />
                            </bfunc>
                        </and>
                    </exists>
                </or>
            </forall>
        </formula>
    </rule>

    <rule>
        <id>rule_09</id>
        <explanation en="A black car must enter streets in topological order. For instance, the car cannot skip the current street and directly enter the next one."
                     ch="黑色小车必须按照拓扑顺序进入街道。例如，它不能跳过当前街道而直接进入下一个。" />
        <formula>
            <forall var="v1" in="black_car3">
                <or>
                    <not>
                        <exists var="v2" in="black_car4">
                            <bfunc id="earlier_than">
                                <param pos="1" var="v2" field="timestamp" />
                                <param pos="2" var="v1" field="timestamp" />
                            </bfunc>
                        </exists>
                    </not>
                    <exists var="v3" in="black_car5">
                        <and>
                            <bfunc id="same_location">
                                <param pos="1" var="v1" field="prev_loc" />
                                <param pos="2" var="v3" field="cur_loc" />
                            </bfunc>
                            <bfunc id="same_location">
                                <param pos="1" var="v1" field="cur_loc" />
                                <param pos="2" var="v3" field="next_loc" />
                            </bfunc>
                        </and>
                    </exists>
                </or>
            </forall>
        </formula>
    </rule>

    <rule>
        <id>rule_10</id>
        <explanation en="A white car must enter streets in topological order. For instance, the car cannot skip the current street and directly enter the next one."
                     ch="白色小车必须按照拓扑顺序进入街道。例如，它不能跳过当前街道而直接进入下一个。" />
        <formula>
            <forall var="v1" in="white_car3">
                <or>
                    <not>
                        <exists var="v2" in="white_car4">
                            <bfunc id="earlier_than">
                                <param pos="1" var="v2" field="timestamp" />
                                <param pos="2" var="v1" field="timestamp" />
                            </bfunc>
                        </exists>
                    </not>
                    <exists var="v3" in="white_car5">
                        <and>
                            <bfunc id="same_location">
                                <param pos="1" var="v1" field="prev_loc" />
                                <param pos="2" var="v3" field="cur_loc" />
                            </bfunc>
                            <bfunc id="same_location">
                                <param pos="1" var="v1" field="cur_loc" />
                                <param pos="2" var="v3" field="next_loc" />
                            </bfunc>
                        </and>
                    </exists>
                </or>
            </forall>
        </formula>
    </rule>

    <rule>
        <id>rule_11</id>
        <explanation en="A red car must enter streets in topological order. For instance, the car cannot skip the current street and directly enter the next one."
                     ch="红色小车必须按照拓扑顺序进入街道。例如，它不能跳过当前街道而直接进入下一个。" />
        <formula>
            <forall var="v1" in="red_car3">
                <or>
                    <not>
                        <exists var="v2" in="red_car4">
                            <bfunc id="earlier_than">
                                <param pos="1" var="v2" field="timestamp" />
                                <param pos="2" var="v1" field="timestamp" />
                            </bfunc>
                        </exists>
                    </not>
                    <exists var="v3" in="red_car5">
                        <and>
                            <bfunc id="same_location">
                                <param pos="1" var="v1" field="prev_loc" />
                                <param pos="2" var="v3" field="cur_loc" />
                            </bfunc>
                            <bfunc id="same_location">
                                <param pos="1" var="v1" field="cur_loc" />
                                <param pos="2" var="v3" field="next_loc" />
                            </bfunc>
                        </and>
                    </exists>
                </or>
            </forall>
        </formula>
    </rule>

    <rule>
        <id>rule_12</id>
        <explanation en="A silver SUV must enter streets in topological order. For instance, the car cannot skip the current street and directly enter the next one."
                     ch="银色小车必须按照拓扑顺序进入街道。例如，它不能跳过当前街道而直接进入下一个。" />
        <formula>
            <forall var="v1" in="silver_suv3">
                <or>
                    <not>
                        <exists var="v2" in="silver_suv4">
                            <bfunc id="earlier_than">
                                <param pos="1" var="v2" field="timestamp" />
                                <param pos="2" var="v1" field="timestamp" />
                            </bfunc>
                        </exists>
                    </not>
                    <exists var="v3" in="silver_suv5">
                        <and>
                            <bfunc id="same_location">
                                <param pos="1" var="v1" field="prev_loc" />
                                <param pos="2" var="v3" field="cur_loc" />
                            </bfunc>
                            <bfunc id="same_location">
                                <param pos="1" var="v1" field="cur_loc" />
                                <param pos="2" var="v3" field="next_loc" />
                            </bfunc>
                        </and>
                    </exists>
                </or>
            </forall>
        </formula>
    </rule>
</rules>